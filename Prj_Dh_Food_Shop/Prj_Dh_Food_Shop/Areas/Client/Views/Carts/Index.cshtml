@model List<Prj_Dh_Food_Shop.Areas.Client.CartItem>
@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/Client/Views/Shared/_LayoutClient.cshtml";
}

<link rel="stylesheet" href="~/Areas/Content/Css/vendor.css" />
<link rel="stylesheet" href="~/Areas/Content/Css/style.css" />
<link rel="Stylesheet" type="text/css" href="~/Areas/Content/Css/n-custom.css" />
<script type="text/javascript" src="~/Areas/Scripts/jquery.min.1.11.3.js"></script>
<script type="text/javascript" src="~/Areas/Scripts/bootstrap.min.js"></script>

<head>
    <style type="text/css">

        .wrap > a:focus {
            outline: none;
        }

        .header-tools > .languageMobile a {
            padding-top: 14px;
        }

        .header-tools > .menuTop > ul > li {
            margin-right: 35px;
        }

        .menuTab ul li a, .productCart a, .info-contact .view-map-contact a, .info-contact .view-map-contact a:before, .form-contact button {
            border-radius: 5px;
        }

        div#vnt-footer > .mainFoot .grid .col:nth-child(3), div#vnt-footer > .mainFoot .grid .col:nth-child(4) {
            margin-bottom: 25px;
        }

        .item > .productCat .tend {
            min-height: 75px;
        }

            .item > .productCat .tend h3 {
                font-size: 27px;
                line-height: 35px;
                white-space: normal;
            }

        .breadcrumb ul li:first-child {
            display: none;
        }

        .breadcrumb ul li:nth-child(2) {
            margin-left: 0;
        }

        .col-lg-6.col-md-6.col-sm-12.col-xs-12 > .productDes {
            font-size: 18px;
            line-height: 26px;
        }

        .item > .productCat .tend h3, .col-lg-4.col-md-4.col-sm-6.col-xs-6 > .product .tend a, .item > .product .tend a, .col-lg-6.col-md-6.col-sm-12.col-xs-12 > .productTitle h1, .col-lg-6.col-md-6.col-sm-12.col-xs-12 > .productTitle h2, .col > .productCat .tend h3 {
            text-transform: none;
        }

        .col-lg-4.col-md-4.col-sm-6.col-xs-6 > .product .tend a {
            font-size: 24px;
            line-height: 32px;
        }

        .productDes > ol, .productDes > ul {
            list-style: disc !important;
            margin-top: 0;
            margin-bottom: 10px;
            padding-inline-start: 40px;
        }

        .info-contact .view-map-contact a span {
            padding-top: 1px;
        }

        .col-lg-4.col-md-4.col-sm-6.col-xs-12 > .recruit .tend h3 {
            height: auto;
        }

        .recruit .des {
            padding-top: 25px;
        }

        .recruit:hover .des {
            padding-top: 0px;
        }
        /*khảng cách tiêu đề bài viết*/
        .wrapConts .box_mid .mid-title .titleL {
            margin-top: 30px
        }

        .productWrap_c {
            margin-top: 30px;
        }

        div#vnt-slide .img {
            padding-top: 40% !important;
        }
    </style>

    <style type="text/css">
        .bx-bct {
            display: flex;
        }
    </style>
    <link href="https://dhfoods.com.vn/js/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="https://dhfoods.com.vn/js/slick/slick.css" rel="stylesheet" type="text/css" />
    <link href="https://dhfoods.com.vn/js/fancybox3/jquery.fancybox.css" type="text/css" rel="stylesheet" />
    <link href="https://dhfoods.com.vn/js/jquery_alerts/jquery.alerts.css" type="text/css" rel="stylesheet" />
    <link href="https://dhfoods.com.vn/js/menumobile/menumobile.css" type="text/css" rel="stylesheet" />
    <link href="https://dhfoods.com.vn/js/my_effect_scroll/animate.css" type="text/css" rel="stylesheet" />
    <link href="https://dhfoods.com.vn/skins/default/style/screen.css?v=1.0" rel="stylesheet" type="text/css" />

    <style type="text/css">
        #vnt-navation {
            background: url('https://dhfoods.com.vn/vnt_upload/weblink/background_1-2.png') repeat center center;
        }

        .mainFoot {
            background: url('https://dhfoods.com.vn/vnt_upload/weblink/background_1-2.png') repeat center center;
        }

        .mainHead {
            background: url('https://dhfoods.com.vn/vnt_upload/weblink/background_1-2.png') repeat center center;
        }
    </style>
</head>

<!-- catg header banner section -->
<div id="vnt-wrapper">
    <div id="vnt-container">
        <div id="vnt-content">
            <div class="vnt-main-top">
                <div id="vnt-slide" class="slick-init">
                    <div class="item">
                        <div class="img">
                            <img src="https://dhfoods.com.vn/vnt_upload/weblink/__Banner_dai_De_dang_mua_sam_san_pham_Dh_Foods.jpg" />
                        </div>
                    </div>
                </div>
                <div id="vnt-navation" class="breadcrumb">
                    <div class="wrapper">
                        <div class="navation">
                            <ul>
                                <li><a href="https://dhfoods.com.vn/"><span>Trang chủ</span></a></li>

                                <li><span>Giỏ hàng</span></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div id="vnt-background" class="bg bgp">
                <div class="wrapConts">
                    <div class="">
                        <div class="box_mid v2">
                            <div class="mid-title">
                                <div class="titleL"><h1>Giỏ hàng</h1></div>
                                <div class="titleR"></div>
                                <div class="clear"></div>
                            </div>
                            <section id="cart-view">
                                <div class="container">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="cart-view-area">
                                                @if (Model == null)
                                                {
                                                <p class="alert alert-info">
                                                    Bạn chưa có sản phẩm nào trong giỏ hàng!
                                                </p>
                                                }
                                                else
                                                {
                                                <div class="cart-view-table">
                                                    <div class="table-responsive">
                                                        <table class="table">
                                                            <thead>
                                                                <tr>
                                                                    <th></th>
                                                                    <th>Sản phẩm</th>
                                                                    <th>Giá</th>
                                                                    <th>Số lượng</th>
                                                                    <th>Tổng</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                @foreach (var item in Model)
                                                                {
                                                                    <tr>
                                                                        <td id="row_" + @item.Product.id>
                                                                            <button class="remove" onclick="RemoveItem(@item.Product.id)">
                                                                                <fa class="fa fa-close"></fa>
                                                                            </button>
                                                                        </td>
                                                                        <td>
                                                                            <a class="aa-cart-title" href="#">
                                                                                @item.Product.name
                                                                            </a>
                                                                        </td>
                                                                        <td>
                                                                            <span>
                                                                                @item.Product.price.ToString("#,##") VNĐ
                                                                            </span>

                                                                        </td>
                                                                        <td>
                                                                            <input class="aa-cart-quantity" id="@item.Product.id" type="number" value="@item.Quantity"
                                                                                   onchange="ChangeQuantity(@item.Product.id)">
                                                                        </td>
                                                                        <td class="@item.Product.id">
                                                                            @(item.Product.price * item.Quantity).ToString("#,##") VNĐ
                                                                        </td>
                                                                    </tr>
                                                                }
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                    <!-- Cart Total view -->
                                                    <div class="cart-view-total">
                                                        <h4>Tổng thanh toán</h4>
                                                        <table class="aa-totals-table">
                                                            <tbody>
                                                                <tr>
                                                                    <th>Tổng số lượng</th>
                                                                    <td id="TotalItems">
                                                                        @*@Model.totalItems*@
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <th>Thành tiền</th>
                                                                    <td id="TotalPrice">
                                                                        @*@if (Model != null)
                                                                            {
                                                                                <span>
                                                                                    @Model.totalPrices.ToString("#,##")
                                                                                </span>
                                                                            }*@
                                                                    </td>
                                                                </tr>

                                                            </tbody>
                                                        </table>
                                                        <a href="@Url.Action("CheckOut")" class="aa-cart-view-btn">Thanh toán</a>
                                                    </div>
                                                </div>
                                                }
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>
<!-- / Cart view section -->
@*@section scripts{

        <script>

            function ChangeQuantity(productId) {
                var q = $("#" + productId).val();
                var quantity = Number(q);
                if (quantity <= 0) {
                    alert("phải lớn hơn hoặc bằng 1");
                    $("#" + productId).val(1);
                    return;
                }
                $.ajax({
                    type: "put",
                    url: "/Cart/ChangQuantity",
                    data: {
                        ProductId: productId,
                        Quantity: quantity
                    },
                    success: function (res) {
                        $("#TotalPrice").text(res.TotalPrices);
                        $("#TotalItems").text(res.TotalItems);
                        $("#total_item_cart").text(res.TotalItems);
                        $("." + productId).text(res.Prices)
                    }
                })
            }

            function RemoveItem(productId) {
                if (confirm("Bạn có muốn xóa bản ghi đã chọn?")) {
                    $.ajax({
                        type: "delete",
                        url: "/Cart/RemoveProduct",
                        data: {
                            ProductId: productId
                        },
                        success: function (res) {
                            alert("Xóa thành công!");
                            $("#row_" + productId).fadeOut();
                            window.location.reload(true);
                        }
                    })
                }
            }
        </script>

    }*@

